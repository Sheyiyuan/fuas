# FUAS开发者笔记

## 前言

这个插件的创作，我秉持着这样的一种理念：实用，易用，舒适。

我不仅是开发者，同时也是使用者，所以应当把好用而非标准放在第一位。
所以我并没有选择直接使用ra、st等原生指令，虽然通用，但是这个指令从实用主义的角度讲并没有有效的提高检定效率，fu这个规则并不需要coc那样繁琐的结果比较运算，其繁杂的反而是掷骰这个动作本身，因此我结合自己几次跑团的经历，并参考了身边一些fu的gm的建议，和意见，重新构筑了一套指令标准。

当然，由于是自己几乎从零开始构建的指令，所以也有很多不足之处，希望大家多多提出宝贵意见，共同完善。

## 指令设计笔记

### 检定

fu的检定在规则书上的分类比较详细，但是按照其实现，我们将其分为以下几种：

1.
*
*基础检定
**
：形如
属性1+属性2+修正值
与
难度
比较的检定，普通的属性检定、施法检定、命中检定均在此类别，团队检定也是多个基础检定的叠加。
2.
*
*对抗检定
**
：两个角色之间的对抗检定，这里涉及两个角色成功等级的比较。
3.
*
*开放检定
**
：即无需难度等级，直接根据检定结果判定成功的检定。

实际上，由于很多时候本该执行基础检定时本质上是进行开放检定，即我们并不需要让骰子告诉我们结果，只需要自己判断就行。而命中检定和相当一部分施法检定的难度是确定并且可以公式化的，所以我们将其单独拿出，最后设计出下面的指令：

1.
*
*基础检定规则
**:

`.fu [属性1] [属性2] [修正值] [难度]`

类似这样的指令格式，其中后面两项可以省略，在不输入难度时默认进行开放检定，成功与否的判断由玩家自己判断。同时为了便捷，提供下面的简写：

`.fu [属性1、2首字母（不加空格）] [修正值] [难度]`

例如：
`.fu mig dex`
等价于
`.fu md`
。由于指令与参数间空格可以省略，你甚至可以直接输入
`.fumd`
来进行开放检定。十分甚至九分优雅。

下文所有涉及到两个属性的指令均可以用这种简写。

其中，修正值前使用+或-表示正负，+/-会作为修正值的标识符，不可以省略。

当然，考虑到成功与命刻的相关性，我同样为部分懒棒GM设计了能够判断并输出命刻的模式。并用检定的另一种模式——我称之为“便捷模式”（其实一点也不便捷并且很死（#小声bb））来进行检定，此时该指令在没有难度的情况下，会填上10这个比较适中和泛用的值作为默认难度，并判断成功等级。在难度等级处使用/作为占位符会强制进行开放检定。

两种模式可以用以下指令进行切换：

`.fumod [模式代号]`

其中0为默认模式，1为便捷模式。

命刻的显示同样可以开关，用以下指令：

`.fuclk [开关]`

其中0为关闭，1为开启。默认关闭。

2.
*
*对抗检定规则
**:
//TODO

`.fuv [对手] [属性1] [属性2]`

对抗检定指令的格式与基础检定指令格式相同，只不过多了对手的名称。这里pc与npc对抗时，由gm
@pc
作为对手进行指令。玩家之间也可以进行对抗检定。

3.
*
*命中检定规则
**:
//TODO

由于施法检定可以按照武器直接确定使用的骰子和修正值，因此命中检定只需要输入武器和对方的豁免即可。目标是pc时可以@pc作为目标。

`.fua [武器] [对手豁免]/[@pc]`

事实上，由于命中检定大部分情况下可以由更灵活的基础检定来代替，因此该指令的开发排期会相对靠后。

### 属性录入

由于fu规则的数值计算整体上比较复杂，因此在数据方面我计划先放弃自动计算，将计算的功能交给电子角色卡来处理。

属性录入分为两种类型：数值型和字符串型。数值型为大部分可以用数字表示的属性，如力量、生命值、物语点、泽尼特等等；字符串型为一些不能用数字表示的属性,如抗性等。

数值型属性录入规则如下：

`.fst [数值型属性&数值(中间不用空格)]/[字符串型属性:字符串(中间用英文冒号)]`

与
`.st`
指令相同，使用
`show`
作为第一参数可以查看当前的属性值。

### 设定状态 //TODO

角色收到状态影响时，可以用以下指令进行设定：

`.buff [状态名] [+/-]`

其中
`+`
表示增加状态，
`-`
表示取消状态。设定状态后会自动更新群名片和属性骰。

### 羁绊设置 //TODO

角色之间的羁绊关系可以用以下指令进行设置：

`.addband [对象] [关系]`
`.rmband [对象] [关系]`

展示羁绊关系可以使用
`.band`
指令。

### 命刻

使用下面的指令用来创建和管理命刻：

`.clk mk 命刻名称] [命刻大小]`
创建一个新的命刻

`.clk ls [命刻名称]`
列出当前群聊的所有命刻

`.clk rm [命刻名称]`
删除命刻

`.clk mv [命刻名称]`
重命名命刻

`.clk cd [命刻名称]`
切换命刻

`.clk [变动值]`
命刻推进

`.clk show`
显示当前命刻

### 伙伴与随从 //TODO

可以使用以下指令创建和管理伙伴：

`.pet new [伙伴名字]`

在大部分指令前加上p将指令作用于伙伴，如：
`.pfu`、
`.pfst`
等

### 面纱与界限管理

本质上就是一个列表插件，我就将之前写的列表插件整合进来了。后续有空会优化指令。
